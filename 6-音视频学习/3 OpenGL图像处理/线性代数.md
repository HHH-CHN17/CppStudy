# 矩阵的核心工具与理论基础

## 行列式

### 行列式的定义

**核心概念**：行列式 (Determinant) 是一个与**方阵** (Square Matrix) 相关联的**标量值**。它包含了关于这个方阵所代表的线性变换的重要信息。

- **二阶行列式**

  **定义**：对于一个2x2的行列式：
  $$
  D=\left|\begin{array}{cc}
  a_{11} & a_{12} \\
  a_{21} & a_{22} \\
  \end{array}\right|
  $$
  

  它的行列式 det(A) 或 |A| 定义为**主对角线**元素之积减去**副对角线**元素之积。

  **公式**：
  det(A) = a₁₁ * a₂₂ - a₁₂ * a₂₁

- **三阶行列式**

  **定义**：对于一个3x3的行列式，其行列式的计算稍微复杂。
  $$
  D=\left|\begin{array}{ccc}
  a_{11} & a_{12} & a_{13} \\
  a_{21} & a_{22} & a_{23} \\
  a_{31} & a_{32} & a_{33}
  \end{array}\right|
  $$
  它的行列式 det(A) 或 |A| 参考以下方法：

  ![image-20250826145705975](./assets/image-20250826145705975.png)

  公式：

  det(A) = (实线上三元素乘积之和) - (虚线上三元素乘积之和)

- **N阶行列式**

  **定义**：一个 N 阶方阵 A 的行列式是其所有**不同行、不同列**的 n 个元素乘积的代数和。
  $$
  D=\left|\begin{array}{cccc}
  a_{11} & a_{12} & \cdots & a_{1 n} \\
  a_{21} & a_{22} & \cdots & a_{2 n} \\
  \vdots & \vdots & & \vdots \\
  a_{n1} & a_{n2} & \cdots & a_{nn}
  \end{array}\right|
  $$
  它的行列式 det(A) 或 |A|为：
  $$
  \det(A) = \sum (-1)^{t} a_{1p_1} a_{2p_2} \cdots a_{np_n}
  $$
  其中 $t$ 是列标排列 $p_1p_2\cdots p_n$ 的逆序数。

  让我们分解这个复杂的公式：

  1. $a_{1p_1}$，$a_{2p_2}$，...，$a_{np_n}$
     - 这是一个由 n 个元素组成的乘积项。
     - 规则是：从方阵的每一行都只取一个元素，并且这些元素所在的列也必须各不相同。
     - 行标 1, 2, ..., n 是固定的，而列标 p₁, p₂, ..., pₙ 是 1, 2, ..., n 的一个**排列 (Permutation)**。例如，对于三阶行列式，123, 132, 213 等都是可能的排列。
  2. $\sum$ 表示对所有 n! 种可能的排列 p₁p₂...pₙ 进行求和。
  3. $(-1)^{t}$ 这是每一项的正负号，由 t 决定。t 是排列 p₁p₂...pₙ 的**逆序数 (Inversion Number)**。**逆序数**：在一个排列中，如果一个较大的数字排在了一个较小的数字前面，就构成一个“逆序”。一个排列的逆序数是其所有逆序的总数。排列 123 的逆序数 t=0 (偶排列)，符号为 (-1)⁰ = +1。排列 132 的逆序数 t=1 (3在2前面)，(奇排列)，符号为 (-1)¹ = -1。

### 行列式的性质

1. **转置不变**: $|A^T| = |A|$ 

2. **交换两行（列），行列式变号** 

   - **推论**: 如果一个行列式有两行（列）完全相同，则该行列式的值为 **0**。 (因为交换这两行，行列式变号，但矩阵本身不变，所以 D = -D，得出 D = 0）。

3. **某行（列）的公因子可以提出**:  
   $$
   \begin{vmatrix} \vdots \\ 
   k \cdot a_{i1} & k \cdot a_{i2} & \cdots & k \cdot a_{in} \\ 
   \vdots \end{vmatrix} 
   = 
   k \cdot \begin{vmatrix} \vdots \\ 
   a_{i1} & a_{i2} & \cdots & a_{in} \\ 
   \vdots \end{vmatrix}
   $$

4. **行（列）的可加性**: 
   $$
   \begin{vmatrix} 
   \vdots \\ 
   a_{i1}+b_{i1} & a_{i2}+b_{i2} & \cdots & a_{in}+b_{in} \\ 
   \vdots \end{vmatrix} 
   = 
   \begin{vmatrix} \vdots \\ 
   a_{i1} & a_{i2} & \cdots & a_{in} \\ 
   \vdots \end{vmatrix} + \begin{vmatrix} \vdots \\ 
   b_{i1} & b_{i2} & \cdots & b_{in} \\ 
   \vdots \end{vmatrix}
   $$

5. **最重要的性质：行（列）的倍加不变**: 将第 $j$ 行的 $k$ 倍加到第 $i$ 行，行列式值不变。

   - |... rᵢ ... rⱼ ...| = |... rᵢ ... rⱼ + k*rᵢ ...|
   - **为何重要**: 这是我们手动计算高阶行列式的**核心工具**。我们可以利用这个性质，在某一行（列）中制造出大量的**零**，然后再进行计算。

### 按行（列）展开

1. 余子式 (Minor)
   - **定义**：在一个n阶行列式中，划去元素 aᵢⱼ 所在的第 i 行和第 j 列后，剩下的元素按原顺序组成的 n-1 阶行列式，称为元素 aᵢⱼ 的**余子式**，记作 Mᵢⱼ。
2. 代数余子式 (Cofactor)
   - **定义**：元素 aᵢⱼ 的**代数余子式** Cᵢⱼ 定义为带符号的余子式。
   - **公式**：Cᵢⱼ = (-1)ⁱ⁺ʲ * Mᵢⱼ

#### 拉普拉斯展开定理

**定理**：一个行列式的值，等于其**任意一行（或一列）** 的所有元素，乘以它们各自对应的**代数余子式**，然后求和的结果。

- 按第 $i$ 行展开:
  $$
  \det(A) = \sum_{j=1}^{n} a_{ij}C_{ij} = a_{i1}C_{i1} + a_{i2}C_{i2} + \cdots + a_{in}C_{in}
  $$

- 按第 $j$ 列展开:
  $$
  \det(A) = \sum_{i=1}^{n} a_{ij}C_{ij} = a_{1j}C_{1j} + a_{2j}C_{2j} + \cdots + a_{nj}C_{nj}
  $$

应用示例：

计算 $A = \begin{vmatrix} 1 & 2 & 3 \\ 4 & 5 & 6 \\ 0 & 8 & 9 \end{vmatrix}$，按第一列展开：
$$
\det(A) = a_{11}C_{11} + a_{21}C_{21} + a_{31}C_{31}
$$

- $C_{11} = (-1)^{1+1} \begin{vmatrix} 5 & 6 \\ 8 & 9 \end{vmatrix} = 1 \cdot (45 - 48) = -3$
- $C_{21} = (-1)^{2+1} \begin{vmatrix} 2 & 3 \\ 8 & 9 \end{vmatrix} = -1 \cdot (18 - 24) = 6$
- $a_{31} = 0$, 该项为 0。

$$
\det(A) = 1 \cdot (-3) + 4 \cdot (6) + 0 \cdot C_{31} = -3 + 24 = 21
$$

**核心思路**：
通过**性质5**（倍加不变）在某一行或某一列制造出尽可能多的**0**，然后**按该行/列展开**，从而大大减少计算量。

## 矩阵及其运算

### 矩阵的定义

一个 $m \times n$ **矩阵**是一个由 $m$ 行 (rows) 和 $n$ 列 (columns) 排列成的矩形数阵。

1. **一般形式**

   我们通常用大写字母（如 $A, B$）来表示矩阵。一个 $m \times n$ 矩阵 $A$ 的一般形式如下：
   $$
   A =
   \begin{bmatrix}
    a_{11} & a_{12} & \cdots & a_{1n} \\
    a_{21} & a_{22} & \cdots & a_{2n} \\
    \vdots & \vdots & \ddots & \vdots \\
    a_{m1} & a_{m2} & \cdots & a_{mn}
   \end{bmatrix}
   $$
   其中，$a_{ij}$ 表示位于第 $i$ 行、第 $j$ 列的元素。

   我们也可以将其简记为：
   $$
   A = (a_{ij})_{m \times n} \quad \text{或} \quad A = (a_{ij})
   $$

2. **关键术语**

   **阶 (Order/Dimension)**: 矩阵的行数和列数（即 $m \times n$）称为矩阵的阶或维度。

   **方阵 (Square Matrix)**: 当行数与列数相等时（即 $m=n$），该矩阵称为 $n$ 阶方阵。方阵从左上到右下的元素 $a_{11}, a_{22}, \dots, a_{nn}$ 构成了它的**主对角线 (Main Diagonal)**。

   **零矩阵 (Zero Matrix)**: 所有元素均为0的矩阵，记作 $O$。

   **单位矩阵 (Identity Matrix)**: 一个主对角线元素为1，其余元素为0的**方阵**，记作 $I$ 或 $I_n$。它的元素可以用**克罗内克 delta (Kronecker delta)**符号 $\delta_{ij}$ 表示：
   $$
   a_{ij} = \delta_{ij} =
       \begin{cases}
       1 & \text{if } i=j \\
       0 & \text{if } i \neq j
       \end{cases}
   $$

3. **几种特殊的矩阵**

   -  **行向量与列向量 (Row/Column Vector)**：
     - 只有一行的矩阵（$1 \times n$）称为行向量。
     - 只有一列的矩阵（$m \times 1$）称为列向量。
     - 在OpenGL和线性代数中，向量通常被视为列向量。
   - **转置矩阵 (Transpose Matrix)**：
     - 将矩阵 $A$ 的行与列互换，得到的新矩阵称为 $A$ 的转置矩阵，记作 $A^T$。
     - 如果 $A = (a_{ij})$，那么 $A^T = (a_{ji})$。
   - **对称矩阵 (Symmetric Matrix)**：
     - 如果一个**方阵** $A$ 满足 $A^T = A$，即 $a_{ij} = a_{ji}$，则称其为对称矩阵。

### 矩阵的加法

**核心规则**：两个矩阵**必须具有相同的阶 (Dimension)** 才能相加。

1. 定义

   若有两个 $m \times n$ 阶的矩阵 $A = (a_{ij})$ 和 $B = (b_{ij})$，它们的和 $C = A+B$ 是一个 $m \times n$ 阶的矩阵，其中每个元素是 $A$ 和 $B$ 对应位置元素的和。

2. 公式
   $$
   C = (c_{ij}) = (a_{ij} + b_{ij})
   $$
   用矩阵的展开形式表示为：
   $$
   A+B =
   \begin{bmatrix}
    a_{11} & \cdots & a_{1n} \\
    \vdots & \ddots & \vdots \\
    a_{m1} & \cdots & a_{mn}
   \end{bmatrix}
   +
   \begin{bmatrix}
    b_{11} & \cdots & b_{1n} \\
    \vdots & \ddots & \vdots \\
    b_{m1} & \cdots & b_{mn}
   \end{bmatrix}
   =
   \begin{bmatrix}
    a_{11}+b_{11} & \cdots & a_{1n}+b_{1n} \\
    \vdots & \ddots & \vdots \\
    a_{m1}+b_{m1} & \cdots & a_{mn}+b_{mn}
   \end{bmatrix}
   $$

3. 矩阵加法的性质

   - **交换律 (Commutative Law)**：`A+B = B+A`
   - **结合律 (Associative Law)**：`(A+B)+C = A+(B+C)`
   - **零元 (Identity Element)**：`A+O = A`其中 `O` 是与 `A` 同阶的零矩阵。
   - **逆元 (Inverse Element)**：`A+(-A) = O`。其中 `−A` 是将 `A` 的每个元素取相反数得到的矩阵，称为 `A` 的**负矩阵**。

   **矩阵减法**是基于加法和负矩阵来定义的：$A-B = A+(-B)$。计算方法就是将对应元素相减。

### 标量乘法

**核心概念**：用一个数（标量）乘以一个矩阵。

1. 定义 

   一个标量 $k$ 与一个 $m \times n$ 阶矩阵 $A = (a_{ij})$ 的乘积，记作 $kA$ 或 $Ak$，是一个 $m \times n$ 阶的矩阵，它的每个元素都是 $A$ 对应元素与标量 $k$ 的乘积。

2. 公式
   $$
   kA = k(a_{ij}) = (k \cdot a_{ij})
   $$

3. 标量乘法的性质

   设 $k$ 和 $l$ 为任意标量，$A$ 和 $B$ 为同阶矩阵：

   - **结合律 (Associative Law)**：$(kl)A = k(lA)$

   - **分配律 (Distributive Laws)**：

     标量对矩阵加法的分配律：$k(A+B) = kA+kB$

     矩阵对标量加法的分配律：$(k+l)A = kA+lA$

   - **单位元 (Identity Element)**：$1A = A$

### 矩阵乘法

它与矩阵加法和标量乘法完全不同，不是简单地将对应元素相乘。

1. 核心规则：阶的匹配

   两个矩阵 $A$ 和 $B$ 能够相乘（得到 $AB$）的**前提条件**是： 

   **第一个矩阵 $A$ 的列数必须等于第二个矩阵 $B$ 的行数。** 

   - 如果 $A$ 是一个 $m \times n$ 阶矩阵。
   - 如果 $B$ 是一个 $n \times p$ 阶矩阵。
   - 那么它们的乘积 $C = AB$ 将是一个 $m \times p$ 阶矩阵。

2. 定义与计算方法

   乘积矩阵 $C = AB$ 中位于第 $i$ 行、第 $j$ 列的元素 $c_{ij}$，是由 $A$ 的**第 $i$ 行**与 $B$ 的**第 $j$ 列**对应元素相乘后求和得到的。

   **公式**：
   $$
   c_{ij} = \sum_{k=1}^{n} a_{ik}b_{kj} = a_{i1}b_{1j} + a_{i2}b_{2j} + \cdots + a_{in}b_{nj}
   $$
   这个过程本质上是**行向量**与**列向量**的**点积 (Dot Product)**。

3. 矩阵乘法的性质

   - **结合律 (Associative Law)**：

     $(AB)C = A(BC)$

     *这个性质至关重要，它允许我们将多个变换矩阵预先乘在一起（例如，得到MVP矩阵）。*

   - **分配律 (Distributive Laws)**：

     $A(B+C) = AB+AC$

     $(A+B)C = AC+BC$

   - **与单位矩阵相乘**：

     $AI = IA = A$

     *单位矩阵 $I$ 在矩阵乘法中的作用类似于数字 $1$。*

   - **不满足交换律**：

     $AB \neq BA \quad (\text{在绝大多数情况下})$

     *这是矩阵乘法**最关键**的特性。矩阵相乘的顺序会直接影响结果。在图形学中，先旋转再平移，与先平移再旋转，得到的结果是完全不同的。*

# 矩阵的逆与变换的应用

## 逆矩阵

### 逆矩阵的定义

**核心思想**：在线性代数中，逆矩阵扮演的角色类似于普通算术中的**倒数**。

在标量运算中，数字 $a$ 的倒数是 $a^{-1}$（即 $\frac{1}{a}$），因为它们满足 $a \cdot a^{-1} = 1$。这里的 $1$ 是乘法运算的“单位元”。 

矩阵运算也有一个单位元——**单位矩阵 $I$**。逆矩阵就是基于这个概念来定义的。

1. 定义

   对于一个 $n$ 阶**方阵** $A$，如果存在另一个 $n$ 阶方阵 $B$，使得它们的乘积为单位矩阵 $I$，即：
   $$
   AB = BA = I
   $$
   那么，我们称矩阵 $A$ 是**可逆的 (Invertible)** 或**非奇异的 (Non-singular)**，并称矩阵 $B$ 是 $A$ 的**逆矩阵**。

   $A$ 的逆矩阵通常记作 $A^{-1}$。

2. 公式
   $$
   A A^{-1} = A^{-1} A = I
   $$

3. 关键条件

   1. **必须是方阵**：只有方阵才可能存在逆矩阵。 
   2. **并非所有方阵都可逆**：如果一个方阵不存在逆矩阵，我们称之为**奇异的 (Singular)** 或**不可逆的 (Non-invertible)**。 
   3. **与行列式的关系**：一个方阵 $A$ 可逆的**充分必要条件**是其行列式不为零：$\det(A) \neq 0$

4. 在图形学中的意义

   逆矩阵在图形学中至关重要，因为它代表了**变换的“撤销”或“反向”**。

   - 如果矩阵 $A$ 代表将一个物体**旋转** $30^{\circ}$。
   - 那么其逆矩阵 $A^{-1}$ 就代表将该物体**反向旋转** $30^{\circ}$ (即旋转 $-30^{\circ}$)，使其回到原始状态。

   一个非常典型的应用是**视图矩阵 (View Matrix)** 的计算。我们通常会定义摄像机在世界中的位置和朝向（这是一个模型变换），然后通过对此变换矩阵**求逆**，得到将整个世界移动到摄像机眼前的视图矩阵。

### 逆矩阵的性质

1. 唯一性 (Uniqueness)

   如果一个矩阵 $A$ 是可逆的，那么它的逆矩阵 $A^{-1}$ 是**唯一**的。

2. “逆”的逆 (Inverse of an Inverse)

   一个可逆矩阵的逆矩阵也是可逆的，并且其逆矩阵等于原矩阵：
   $$
   (A^{-1})^{-1} = A
   $$
   这很好理解：撤销一个“撤销”操作，就等于回到了原始操作。

3. 乘积的逆 (Inverse of a Product)

   两个可逆矩阵的乘积 $AB$ 也是可逆的，其逆矩阵等于**反向顺序**下各自逆矩阵的乘积：
   $$
   (AB)^{-1} = B^{-1}A^{-1}
   $$
   这个性质可以推广到多个矩阵的乘积：
   $$
   (A_1A_2 \cdots A_k)^{-1} = A_k^{-1} \cdots A_2^{-1}A_1^{-1}
   $$

4. 转置的逆 (Inverse of a Transpose)

   一个可逆矩阵的转置 $A^T$ 也是可逆的，其逆等于逆矩阵的转置。
   $$
   (A^T)^{-1} = (A^{-1})^T
   $$
   简单来说，**求逆和转置**这两个操作的顺序可以交换。

5. 标量乘法的逆 (Inverse of a Scalar Product)

   一个非零标量 $k$ 与一个可逆矩阵 $A$ 的乘积 $kA$ 也是可逆的。
   $$
   (kA)^{-1} = \frac{1}{k} A^{-1}
   $$

6. 行列式与逆

   一个可逆矩阵的行列式与它的逆矩阵的行列式互为倒数。
   $$
   \det(A^{-1}) = \frac{1}{\det(A)}
   $$
   这个性质源于 $\det(AB) = \det(A)\det(B)$ 和 $A A^{-1} = I$。
   $$
   \det(A A^{-1}) = \det(I) \implies \det(A)\det(A^{-1}) = 1
   $$

### 逆矩阵的求法

#### 伴随矩阵求逆

这个方法在理论上非常重要，但在计算机数值计算中，对于高阶矩阵而言效率不高。不过对于二阶、三阶矩阵的手动求解，它非常直观。

1. 伴随矩阵的定义

   要理解伴随矩阵，我们首先需要回顾**代数余子式 (Cofactor)** 的概念。对于一个 $n \times n$ 矩阵 $A = (a_{ij})$，其位于 $(i, j)$ 位置的元素的代数余子式为 $C_{ij} = (-1)^{i+j}M_{ij}$。

   **定义**：

   矩阵 $A$ 的**伴随矩阵**，记作 $A^*$ 或 $\text{adj}(A)$，是由 $A$ 的所有元素的**代数余子式**构成的矩阵，并且**进行了转置**。

   1. **第一步：计算所有代数余子式**

      构建一个矩阵，其 $(i, j)$ 位置的元素是原矩阵 $A$ 中 $a_{ij}$ 的代au数余子式 $C_{ij}$。这个矩阵被称为**余子矩阵**或**代数余子式矩阵**。
      $$
      C =
      \begin{bmatrix}
      C_{11} & C_{12} & \cdots & C_{1n} \\
      C_{21} & C_{22} & \cdots & C_{2n} \\
      \vdots & \vdots & \ddots & \vdots \\
      C_{n1} & C_{n2} & \cdots & C_{nn}
      \end{bmatrix}
      $$

   2. **第二步：转置余子矩阵**
      $$
      A^* = C^T =
      \begin{bmatrix}
      C_{11} & C_{21} & \cdots & C_{n1} \\
      C_{12} & C_{22} & \cdots & C_{n2} \\
      \vdots & \vdots & \ddots & \vdots \\
      C_{1n} & C_{2n} & \cdots & C_{nn}
      \end{bmatrix}
      $$

   ---

2. **核心定理**

   伴随矩阵最重要的性质是它与原矩阵 $A$ 的乘积关系：
   $$
   A A^* = A^* A = \det(A) I
   $$
   其中 $I$ 是单位矩阵。这个定理是推导逆矩阵公式的基础。

   ---

3. 利用伴随矩阵求逆

   **公式**： 

   如果一个方阵 $A$ 是可逆的（即 $\det(A) \neq 0$），那么它的逆矩阵 $A^{-1}$ 可以通过以下公式计算：
   $$
   A^{-1} = \frac{1}{\det(A)} A^*
   $$
   **求解步骤**：

   1.  计算矩阵 $A$ 的行列式 $\det(A)$。如果 $\det(A)=0$，则矩阵不可逆，停止计算。
   2.  计算 $A$ 中每一个元素的代数余子式 $C_{ij}$。
   3.  将所有代数余子式组成伴随矩阵 $A^*$（**不要忘记转置**）。
   4.  将伴随矩阵 $A^*$ 乘以 $\frac{1}{\det(A)}$，得到逆矩阵 $A^{-1}$。

   ---

4. 特别的，对于二阶矩阵$A = \begin{bmatrix} a & b \\ c & d \end{bmatrix}$，其逆矩阵为：
   $$
   A^{-1} = \frac{1}{ad-bc}
   \begin{bmatrix}
   d & -b \\
   -c & a
   \end{bmatrix}
   $$
   **主对角线元素互换，副对角线元素变号，再除以行列式。**